<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Reservas - Entrega de Quarta</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Bootstrap básico + DataTables -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.5/css/jquery.dataTables.min.css">

  <style>
    body { background-color: #fff; }
    h2 { text-align: center; margin-top: 20px; font-size: 24px; }
    .container { margin-top: 30px; }
  </style>
</head>
<body>

<div class="container">
  <h2>Entrega de Quarta</h2>
  <p class="text-center">Lista com todas as reservas e seus dados.</p>

  <input type="text" id="searchInput" class="form-control mb-3" placeholder="Buscar por nome do cliente...">

  <table id="reservaTable" class="table table-bordered table-sm">
    <thead>
      <tr>
        <th>Cliente</th>
        <th>Documento</th>
        <th>Veículo</th>
        <th>Placa</th>
        <th>Funcionário</th>
        <th>Data Início</th>
        <th>Data Fim</th>
        <th>Status</th>
        <th>Valor Total</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      {% for reserva in reservas %}
      <tr>
        <td>{{ reserva.cliente.nome }}</td>
        <td>{{ reserva.cliente.documento }}</td>
        <td>{{ reserva.veiculo.modelo }}</td>
        <td>{{ reserva.veiculo.placa }}</td>
        <td>{{ reserva.funcionario.nome }}</td>
        <td>{{ reserva.data_inicio }}</td>
        <td>{{ reserva.data_fim }}</td>
        <td>{{ reserva.status|title }}</td>
        <td>{{ reserva.valor_total }}</td>
        <td>
          <a href="{% url 'registrar_retirada' reserva.id %}" class="btn btn-sm btn-outline-primary">Retirar</a>
          <a href="{% url 'registrar_devolucao_veiculo' reserva.id %}" class="btn btn-sm btn-outline-success">Devolver</a>
          <a href="{% url 'editar_reserva' reserva.id %}" class="btn btn-sm btn-outline-warning">Editar</a>
          <a href="{% url 'excluir_reserva' reserva.id %}" class="btn btn-sm btn-outline-danger">Excluir</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>

<script>
  $(document).ready(function () {
    const tabela = $('#reservaTable').DataTable({
      ordering: true,
      language: {
        search: "",
        searchPlaceholder: "Buscar...",
        lengthMenu: "Mostrar _MENU_ por página",
        zeroRecords: "Nenhuma reserva encontrada",
        info: "Mostrando _START_ até _END_ de _TOTAL_ reservas",
        infoEmpty: "Nenhum dado disponível",
        paginate: { previous: "Anterior", next: "Próximo" }
      }
    });

    $('#searchInput').on('keyup', function () {
      tabela.search(this.value).draw();
    });
  });
</script>

</body>
</html>
